async function checkProxy(){let a=document.getElementById("proxyFormat").value;var e=document.getElementById("proxyList").value.split("\n").filter(e=>""!==e.trim());let i=document.getElementById("resultTable"),c=document.getElementById("activeProxies"),l=document.getElementById("inactiveProxies");var t=document.getElementById("checkButton");if(i.innerHTML="",c.value="",l.value="",0===e.length)alert("Please enter at least one proxy to check.");else{let o=0,s=0;t.disabled=!0,t.innerHTML='<i class="spinner"></i> Checking...',e.forEach((r,n)=>{var e,t=parseProxy(r,a);t?((e=document.createElement("tr")).innerHTML=`
                <td>${n+1}</td>
                <td>${r}</td>
                <td>${t.ip}</td>
                <td id="status-${n}" class="spinner"></td>
            `,i.appendChild(e),checkProxyStatus(t,n).then(e=>{var t=document.getElementById("status-"+n);t?(t.classList.remove("spinner"),e.active?t.innerHTML='<span class="check"></span>':(t.innerHTML="❌",t.style.color="red"),e.active?(c.value+=r+"\n",o++):(l.value+=r+"\n",s++),document.querySelector(".active-proxy").innerHTML=`<i class="fas fa-desktop"></i> Active Proxies (${o})`,document.querySelector(".inactive-proxy").innerHTML=`<i class="fas fa-desktop"></i> Inactive Proxies (${s})`):console.error("Cannot find element with ID status-"+n)}).catch(e=>{console.error(`Error checking proxy ${r}:`,e);e=document.getElementById("status-"+n);e?(e.classList.remove("spinner"),e.innerHTML="❌",e.style.color="red"):console.error("Cannot find element with ID status-"+n)})):console.error("Invalid proxy format: "+r)}),t.disabled=!1,t.innerHTML='<i class="fas fa-check"></i> Check'}}function parseProxy(e,t){var r=e.split(/[:@]/);switch(t){case"host:port:username:password":if(4===r.length)return{ip:r[0],port:r[1],username:r[2],password:r[3]};break;case"username:password@host:port":case"username:password:host:port":if(4===r.length)return{ip:r[2],port:r[3],username:r[0],password:r[1]};break;case"host:port@username:password":if(4===r.length)return{ip:r[0],port:r[1],username:r[2],password:r[3]};break;case"host:port":if(2===r.length)return{ip:r[0],port:r[1],username:"",password:""}}return null}async function checkProxyStatus({ip:e,port:t,username:r,password:n},o){try{var s=await fetch("https://checklive.vn/check-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:e,port:t,username:r,password:n})});if(s.ok)return await s.json();throw new Error("Network response was not ok")}catch(e){return console.error("Error checking proxy:",e),{active:!1}}}function copyToClipboard(e){e=document.getElementById(e);e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),alert("Copied: "+e.value)}function updateProxyCount(){var e=document.getElementById("proxyList").value.split("\n").filter(e=>""!==e.trim());document.querySelector('label[for="proxyList"]').innerHTML=`<i class="fas fa-list"></i> Proxy List (${e.length})`}
